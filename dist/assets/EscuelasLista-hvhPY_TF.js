import{B as f,o as m,c as b,b as s,t as n,w as u,v as c,n as E,m as _,a as g,g as $,F as C,r as k,j as h,l as p}from"./index-crUL-HRR.js";const y={class:"modal-card"},w={class:"modal-card-head"},N={class:"modal-card-title"},V={class:"modal-card-body"},j={class:"field"},U={class:"field"},A={class:"field"},B={class:"field"},x={class:"modal-card-foot"},D={__name:"escuelaModal",props:{isActive:Boolean,escuelaEdit:{type:Object,default:null}},emits:["close","escuela-guardada"],setup(v,{emit:r}){const o=v,i=r,t=_({id:null,nombre_corto:"",nombre_largo:"",cue:"",direccion:""});f(()=>o.isActive,a=>{a&&o.escuelaEdit?Object.assign(t,o.escuelaEdit):a&&Object.assign(t,{id:null,nombre_corto:"",nombre_largo:"",cue:"",direccion:""})});const d=async()=>{try{t.id?await g.put(`/escuelas/${t.id}`,t):await g.post("/escuelas",t),i("escuela-guardada"),i("close")}catch{alert("Error al guardar la escuela")}};return(a,l)=>(m(),b("div",{class:E(["modal",{"is-active":v.isActive}])},[s("div",{class:"modal-background",onClick:l[0]||(l[0]=e=>a.$emit("close"))}),s("div",y,[s("header",w,[s("p",N,n(t.id?"Editar Escuela":"Nueva Escuela"),1)]),s("section",V,[s("div",j,[l[6]||(l[6]=s("label",{class:"label"},"Nombre Corto (Siglas)",-1)),u(s("input",{"onUpdate:modelValue":l[1]||(l[1]=e=>t.nombre_corto=e),class:"input",placeholder:"Ej: EET 24"},null,512),[[c,t.nombre_corto]])]),s("div",U,[l[7]||(l[7]=s("label",{class:"label"},"Nombre Largo",-1)),u(s("input",{"onUpdate:modelValue":l[2]||(l[2]=e=>t.nombre_largo=e),class:"input",placeholder:"Ej: Simon de Iriondo"},null,512),[[c,t.nombre_largo]])]),s("div",A,[l[8]||(l[8]=s("label",{class:"label"},"CUE",-1)),u(s("input",{"onUpdate:modelValue":l[3]||(l[3]=e=>t.cue=e),class:"input",placeholder:"Código Único de Establecimiento"},null,512),[[c,t.cue]])]),s("div",B,[l[9]||(l[9]=s("label",{class:"label"},"Dirección",-1)),u(s("input",{"onUpdate:modelValue":l[4]||(l[4]=e=>t.direccion=e),class:"input"},null,512),[[c,t.direccion]])])]),s("footer",x,[s("button",{class:"button is-success",onClick:d},"Guardar"),s("button",{class:"button",onClick:l[5]||(l[5]=e=>a.$emit("close"))},"Cancelar")])])],2))}},M={class:"container mt-5"},S={class:"level mb-5"},G={class:"level-right"},L={class:"box"},O={class:"table is-fullwidth is-hoverable"},F={class:"tag is-light"},T={class:"has-text-right"},z=["onClick"],H={__name:"EscuelasLista",setup(v){const r=p([]),o=p(!1),i=p(null),t=async()=>{const a=await g.get("/escuelas");r.value=a.data},d=(a=null)=>{i.value=a,o.value=!0};return $(t),(a,l)=>(m(),b("div",M,[s("div",S,[s("div",null,[s("button",{class:"button is-small is-light mb-3",onClick:l[0]||(l[0]=e=>a.$router.back())},[...l[3]||(l[3]=[s("span",{class:"icon is-small"},[s("i",{class:"fas fa-arrow-left"})],-1),s("span",null,"Volver",-1)])]),l[4]||(l[4]=s("h1",{class:"title"},"Gestión de Escuelas",-1))]),s("div",G,[s("button",{class:"button is-primary",onClick:l[1]||(l[1]=e=>d())},[...l[5]||(l[5]=[s("span",{class:"icon"},[s("i",{class:"fas fa-plus"})],-1),s("span",null,"Nueva Escuela",-1)])])])]),s("div",L,[s("table",O,[l[6]||(l[6]=s("thead",null,[s("tr",null,[s("th",null,"Siglas"),s("th",null,"Nombre Completo"),s("th",null,"CUE"),s("th",null,"Dirección"),s("th",{class:"has-text-right"},"Acciones")])],-1)),s("tbody",null,[(m(!0),b(C,null,k(r.value,e=>(m(),b("tr",{key:e.id},[s("td",null,[s("strong",null,n(e.nombre_corto),1)]),s("td",null,n(e.nombre_largo),1),s("td",null,[s("span",F,n(e.cue),1)]),s("td",null,n(e.direccion),1),s("td",T,[s("button",{class:"button is-small is-info is-light",onClick:I=>d(e)}," Editar ",8,z)])]))),128))])])]),h(D,{"is-active":o.value,"escuela-edit":i.value,onClose:l[2]||(l[2]=e=>o.value=!1),onEscuelaGuardada:t},null,8,["is-active","escuela-edit"])]))}};export{H as default};
